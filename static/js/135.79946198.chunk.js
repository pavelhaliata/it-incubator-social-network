"use strict";(self.webpackChunkit_incubator_social_network=self.webpackChunkit_incubator_social_network||[]).push([[135],{7135:(s,e,a)=>{a.r(e),a.d(e,{Dialogs:()=>p});var t=a(2791);const i={dialogs:"Dialogs_dialogs__rFWzo",author:"Dialogs_author__2pfaz",companion:"Dialogs_companion__Vhbx0",dialog_input:"Dialogs_dialog_input__UnA2B",input_message:"Dialogs_input_message__JCpos",send_btn:"Dialogs_send_btn__KgD5-"},n="Message_message__4Az-o",l="Message_message__header__6hiYi",c="Message_message__avatar__1uS4+",o="Message_message__authorId__o6bHT",r="Message_message__body__QSsyP",_="Message_message__author__2irU0",d="Message_message__text__eIqDt";var g=a(184);const m=t.memo((function(s){return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:n,children:[(0,g.jsxs)("div",{className:l,children:[(0,g.jsx)("div",{className:c,children:(0,g.jsx)("img",{src:s.photo,alt:s.userName})}),(0,g.jsxs)("div",{className:o,children:[(0,g.jsx)("span",{children:"id:"}),s.userId]})]}),(0,g.jsxs)("div",{className:r,children:[(0,g.jsx)("div",{className:_,children:s.userName}),(0,g.jsx)("div",{className:d,children:s.message})]})]})})}));var u=a(9609);const h=a.p+"static/media/loading-pulse-200px.0283178318e6660cfda89ca47b797a53.svg",p=s=>{const[e,a]=(0,t.useState)(""),[n,l]=(0,t.useState)(!1),c=(0,t.useRef)(null);(0,t.useEffect)((()=>(s.startMessagesListeningAsync(),()=>{s.stopMessagesListeningAsync()})),[]),(0,t.useEffect)((()=>{var e;s.messages.length&&(null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"}))}),[s.messages.length]);const o=()=>{e&&(s.sendMessageAsync(e),a(""))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"".concat(i.dialogs),children:"pending"===s.status?(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["connection lost... reconnect, please wait...",(0,g.jsx)("img",{src:h,width:"34px",height:"34px",alt:"icon"})]}):(0,g.jsxs)("div",{className:"".concat(i.dialog_item," ").concat(i.author),onScroll:s=>{const e=s.currentTarget;Math.abs(e.scrollHeight-e.scrollTop-e.clientHeight)<300?!n&&l(!0):n&&l(!1)},children:[s.messages.map((s=>(0,g.jsx)(m,{id:s.id,userId:s.userId,userName:s.userName,photo:s.photo,message:s.message},s.id))),(0,g.jsx)("div",{ref:c})]})}),(0,g.jsxs)("div",{className:i.dialog_input,children:[(0,g.jsx)("textarea",{autoFocus:!0,className:i.input_message,placeholder:"Write message...",value:e,onChange:s=>{a(s.currentTarget.value)},onKeyDown:s=>{"Enter"===s.key&&s.ctrlKey&&e&&o()}}),(0,g.jsx)(u.z,{label:"Send",disabled:"ready"!==s.status,className:i.send_btn,onClick:o})]})]})}}}]);
//# sourceMappingURL=135.79946198.chunk.js.map