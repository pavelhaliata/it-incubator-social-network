{"version":3,"file":"static/js/967.ee96a6c3.chunk.js","mappings":"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","sources":["webpack://it-incubator-social-network/./src/pages/MainPage/Users/Users.module.scss?f488","pages/MainPage/Users/Users.tsx","utils/pages-creator.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"page_navigation\":\"Users_page_navigation__gPSRy\",\"page_number\":\"Users_page_number__mO00T\",\"current\":\"Users_current__LWlP2\",\"block_loading\":\"Users_block_loading__fftMf\",\"container_fluid\":\"Users_container_fluid__lj7CI\",\"searchForm\":\"Users_searchForm__ak6Ub\"};","import { RequestStatus } from \"app/app-reducer\";\r\nimport { Field, Formik } from \"formik\";\r\nimport { ChangeEvent, lazy, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { usersFilterType } from \"store-redux/ProfilePage_reducer\";\r\nimport { AppRootState } from \"store-redux/redux-store\";\r\nimport { pagesCreator } from \"utils/pages-creator\";\r\nimport style from \"./Users.module.scss\";\r\nimport { UsersPropsType } from \"./UsersContainer\";\r\n\r\nconst User = lazy(() =>\r\n  import(\"./User/User\").then((module) => ({ default: module.User })),\r\n);\r\n\r\nexport const Users = ({\r\n  usersData,\r\n  setCurrentPage,\r\n  currentPage,\r\n  pageSize,\r\n  totalUsersCount,\r\n  followUser,\r\n  unfollowUser,\r\n  requestStatus,\r\n  selectedCurrentUser,\r\n  getUsersAsync,\r\n}: UsersPropsType) => {\r\n  const totalPage = Math.ceil(totalUsersCount / pageSize);\r\n\r\n  const pages: number[] = [];\r\n\r\n  pagesCreator(pages, totalPage, currentPage);\r\n\r\n  return (\r\n    <>\r\n      <UsersSearchForm\r\n        currentPage={currentPage}\r\n        pageSize={pageSize}\r\n        getUsersAsync={getUsersAsync}\r\n      />\r\n      {requestStatus === RequestStatus.loading && <span>...search users</span>}\r\n      <div className={style.page_navigation}>\r\n        {pages.map((p) => (\r\n          <span\r\n            key={p}\r\n            className={`${style.page_number} ${\r\n              currentPage === p && style.current\r\n            }`}\r\n            onClick={() => {\r\n              setCurrentPage(p);\r\n            }}\r\n          >\r\n            {p}\r\n          </span>\r\n        ))}\r\n      </div>\r\n      <div className={style.container_fluid}>\r\n        {usersData &&\r\n          usersData.map((user) => {\r\n            const followUserHandler = () => {\r\n              followUser(user.id);\r\n            };\r\n            const unFollowUserHandler = () => {\r\n              unfollowUser(user.id);\r\n            };\r\n            return (\r\n              <User\r\n                selectedCurrentUser={selectedCurrentUser}\r\n                followed={user.followed}\r\n                followUser={followUserHandler}\r\n                unFollowUser={unFollowUserHandler}\r\n                key={user.id}\r\n                avatar={user.photos.small}\r\n                name={user.name}\r\n                requestStatus={requestStatus}\r\n                id={user.id}\r\n              />\r\n            );\r\n          })}\r\n      </div>\r\n      <div className={style.page_navigation}>\r\n        {pages.map((p) => (\r\n          <span\r\n            key={p}\r\n            className={`${style.page_number} ${\r\n              currentPage === p && style.current\r\n            }`}\r\n            onClick={() => {\r\n              setCurrentPage(p);\r\n            }}\r\n          >\r\n            {p}\r\n          </span>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst UsersSearchForm = (props: {\r\n  currentPage: number;\r\n  pageSize: number;\r\n  getUsersAsync: (\r\n    currentPage: number,\r\n    pageSize: number,\r\n    filter: usersFilterType,\r\n  ) => void;\r\n}) => {\r\n  const term = useSelector(\r\n    (state: AppRootState) => state.profilePage.usersFilter.term,\r\n  );\r\n  const friends = useSelector(\r\n    (state: AppRootState) => state.profilePage.usersFilter.friends,\r\n  );\r\n  const [timerId, setTimerId] = useState<number | undefined>(undefined);\r\n\r\n  const initialValue = {\r\n    term: term,\r\n    friends: friends,\r\n  } as usersFilterType;\r\n  return (\r\n    <Formik\r\n      initialValues={initialValue}\r\n      onSubmit={(values) => {\r\n        clearInterval(timerId);\r\n        const id = setTimeout(() => {\r\n          props.getUsersAsync(1, props.pageSize, values);\r\n        }, 1500);\r\n        setTimerId(+id);\r\n      }}\r\n    >\r\n      {({ values, handleChange, submitForm }) => (\r\n        <>\r\n          <Field\r\n            className={style.searchForm}\r\n            name=\"term\"\r\n            value={values.term}\r\n            placeholder={\"find friends\"}\r\n            onChange={(e: ChangeEvent<HTMLInputElement>) => {\r\n              handleChange(e);\r\n              submitForm();\r\n            }}\r\n          />\r\n          <Field\r\n            as=\"select\"\r\n            name=\"friends\"\r\n            value={values.friends}\r\n            onChange={(e: any) => {\r\n              handleChange(e);\r\n              submitForm();\r\n            }}\r\n          >\r\n            <option value=\"null\">All</option>\r\n            <option value=\"true\">Only followed</option>\r\n            <option value=\"false\">Only unfollowed</option>\r\n          </Field>\r\n        </>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n","export function pagesCreator(pages: Array<number>, totalPage: number, currentPage: number) {\r\n    if (totalPage > 10) {\r\n        if (currentPage > 5) {\r\n            for (let i = currentPage - 4; i <= currentPage + 5; i++) {\r\n                pages.push(i)\r\n                if (i == totalPage) break\r\n            }\r\n        } else {\r\n            for (let i = 1; i <= 10; i++) {\r\n                pages.push(i)\r\n                if (i == totalPage) break\r\n            }\r\n        }\r\n    } else {\r\n        for (let i = 1; i <= totalPage; i++) {\r\n            pages.push(i)\r\n        }\r\n    }\r\n}\r\n"],"names":["User","lazy","then","module","default","Users","_ref","usersData","setCurrentPage","currentPage","pageSize","totalUsersCount","followUser","unfollowUser","requestStatus","selectedCurrentUser","getUsersAsync","pages","totalPage","i","push","pagesCreator","Math","ceil","_jsxs","_Fragment","children","_jsx","UsersSearchForm","RequestStatus","loading","className","style","map","p","concat","onClick","user","followed","followUserHandler","id","unFollowUser","unFollowUserHandler","avatar","photos","small","name","props","term","useSelector","state","profilePage","usersFilter","friends","timerId","setTimerId","useState","undefined","initialValue","Formik","initialValues","onSubmit","values","clearInterval","setTimeout","_ref2","handleChange","submitForm","Field","value","placeholder","onChange","e","as"],"sourceRoot":""}